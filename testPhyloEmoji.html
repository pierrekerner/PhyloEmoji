<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Phylog√©nie Emoji</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
        }
        
        .stat-label {
            font-size: 0.85em;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .question {
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 30px;
            color: #444;
            line-height: 1.6;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .organisms {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .organism-box {
            text-align: center;
        }
        
        .organism {
            font-size: 4.5em;
            padding: 20px;
            background: #fff;
            border-radius: 15px;
            border: 4px solid #e0e0e0;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .organism-label {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
            font-weight: 500;
        }
        
        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .choice {
            padding: 20px;
            background: #f8f9fa;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            text-align: center;
        }
        
        .choice:hover {
            background: #e3f2fd;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .choice.correct {
            background: #c8e6c9;
            border-color: #4caf50;
            font-weight: bold;
        }
        
        .choice.incorrect {
            background: #ffcdd2;
            border-color: #f44336;
        }
        
        .choice.disabled {
            pointer-events: none;
            opacity: 0.6;
        }
        
        .feedback {
            margin-top: 25px;
            padding: 25px;
            border-radius: 15px;
            display: none;
            line-height: 1.8;
        }
        
        .feedback.show {
            display: block;
        }
        
        .feedback.correct {
            background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
            border: 3px solid #4caf50;
        }
        
        .feedback.incorrect {
            background: linear-gradient(135deg, #ffcdd2 0%, #ef9a9a 100%);
            border: 3px solid #f44336;
        }
        
        .feedback-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .feedback-content {
            font-size: 1em;
            color: #333;
        }
        
        .time-info {
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid #667eea;
        }
        
        .time-value {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
        }
        
        .next-btn {
            margin-top: 20px;
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            display: none;
            margin-left: auto;
            margin-right: auto;
            transition: transform 0.2s;
        }
        
        .next-btn.show {
            display: block;
        }
        
        .next-btn:hover {
            transform: scale(1.05);
        }
        
        .taxonomy-info {
            font-style: italic;
            margin-top: 10px;
            font-size: 0.95em;
        }
        
        .mode-selection {
            text-align: center;
        }
        
        .mode-title {
            font-size: 1.3em;
            color: #333;
            margin: 40px 0 30px 0;
            font-weight: 600;
        }
        
        .mode-options {
            display: flex;
            gap: 25px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .mode-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 3px solid #e0e0e0;
            border-radius: 20px;
            padding: 40px 30px;
            width: 250px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border-color: #667eea;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }
        
        .mode-emoji {
            font-size: 5em;
            margin-bottom: 20px;
        }
        
        .mode-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .mode-description {
            font-size: 0.95em;
            color: #666;
            line-height: 1.4;
        }
        
        .game-mode-indicator {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .game-mode-indicator span {
            font-size: 1.1em;
            color: #667eea;
            font-weight: 600;
        }
        
        .change-mode-btn {
            padding: 8px 20px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .change-mode-btn:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <div id="modeSelection" class="mode-selection">
            <h1>üå≥ Phylog√©nie des Emojis üå≥</h1>
            <div class="subtitle">Identifiez les deux organismes les plus proches phylog√©n√©tiquement</div>
            
            <div class="mode-title">Choisissez votre jeu :</div>
            
            <div class="mode-options">
                <div class="mode-card" onclick="startGame('plants')">
                    <div class="mode-emoji">üåø</div>
                    <div class="mode-name">Plantes</div>
                    <div class="mode-description">Angiospermes, gymnospermes et foug√®res</div>
                </div>
                
                <div class="mode-card" onclick="startGame('animals')">
                    <div class="mode-emoji">ü¶Å</div>
                    <div class="mode-name">Animaux</div>
                    <div class="mode-description">Mammif√®res, oiseaux, reptiles, insectes...</div>
                </div>
                
                <div class="mode-card" onclick="startGame('all')">
                    <div class="mode-emoji">üåç</div>
                    <div class="mode-name">Tout le vivant</div>
                    <div class="mode-description">Plantes, animaux, champignons</div>
                </div>
            </div>
        </div>
        
        <div id="gameContent" style="display: none;">
            <h1>üå≥ Phylog√©nie des Emojis üå≥</h1>
            <div class="subtitle">Identifiez les deux organismes les plus proches phylog√©n√©tiquement</div>
            
            <div class="game-mode-indicator">
                <span id="currentMode"></span>
                <button class="change-mode-btn" onclick="returnToMenu()">Changer de mode</button>
            </div>
            
            <div class="stats">
            <div class="stat-box">
                <div class="stat-label">Score</div>
                <div class="stat-value"><span id="score">0</span> / <span id="total">0</span></div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Taux de r√©ussite</div>
                <div class="stat-value" id="percentage">-</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Question</div>
                <div class="stat-value" id="questionNum">1</div>
            </div>
        </div>
        
        <div class="question">
            Parmi ces trois organismes, quels sont les <strong>deux qui partagent l'anc√™tre commun le plus r√©cent</strong> ?
        </div>
        
        <div class="organisms" id="organisms"></div>
        
        <div class="choices" id="choices"></div>
        
        <div class="feedback" id="feedback"></div>
        
        <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Question suivante ‚ûú</button>
        </div>
    </div>

    <script>
        // Donn√©es phylog√©n√©tiques bas√©es sur TimeTree.org
        const organisms = [
            // PLANTES ANGIOSPERMES
            // Rosac√©es
            { emoji: 'üçé', name: 'Pomme', latin: 'Malus domestica', group: 'Rosac√©es', family: 'Rosac√©es', order: 'Rosales', class: 'Angiospermes', species: 'Malus' },
            { emoji: 'üçê', name: 'Poire', latin: 'Pyrus communis', group: 'Rosac√©es', family: 'Rosac√©es', order: 'Rosales', class: 'Angiospermes', species: 'Pyrus' },
            { emoji: 'üçë', name: 'P√™che', latin: 'Prunus persica', group: 'Rosac√©es', family: 'Rosac√©es', order: 'Rosales', class: 'Angiospermes', species: 'Prunus-peche' },
            { emoji: 'üçí', name: 'Cerise', latin: 'Prunus avium', group: 'Rosac√©es', family: 'Rosac√©es', order: 'Rosales', class: 'Angiospermes', species: 'Prunus-cerise' },
            { emoji: 'üçì', name: 'Fraise', latin: 'Fragaria √óananassa', group: 'Rosac√©es', family: 'Rosac√©es', order: 'Rosales', class: 'Angiospermes', species: 'Fragaria' },
            { emoji: 'üåπ', name: 'Rose', latin: 'Rosa spp.', group: 'Rosac√©es', family: 'Rosac√©es', order: 'Rosales', class: 'Angiospermes', species: 'Rosa' },
            
            // Solanac√©es
            { emoji: 'üçÖ', name: 'Tomate', latin: 'Solanum lycopersicum', group: 'Solanac√©es', family: 'Solanac√©es', order: 'Solanales', class: 'Angiospermes', species: 'Solanum-tomate' },
            { emoji: 'üçÜ', name: 'Aubergine', latin: 'Solanum melongena', group: 'Solanac√©es', family: 'Solanac√©es', order: 'Solanales', class: 'Angiospermes', species: 'Solanum-aubergine' },
            { emoji: 'ü•î', name: 'Pomme de terre', latin: 'Solanum tuberosum', group: 'Solanac√©es', family: 'Solanac√©es', order: 'Solanales', class: 'Angiospermes', species: 'Solanum-pomme' },
            { emoji: 'üå∂Ô∏è', name: 'Piment', latin: 'Capsicum annuum', group: 'Solanac√©es', family: 'Solanac√©es', order: 'Solanales', class: 'Angiospermes', species: 'Capsicum' },
            
            // Cucurbitac√©es  
            { emoji: 'üçâ', name: 'Past√®que', latin: 'Citrullus lanatus', group: 'Cucurbitac√©es', family: 'Cucurbitac√©es', order: 'Cucurbitales', class: 'Angiospermes', species: 'Citrullus' },
            { emoji: 'ü•í', name: 'Concombre', latin: 'Cucumis sativus', group: 'Cucurbitac√©es', family: 'Cucurbitac√©es', order: 'Cucurbitales', class: 'Angiospermes', species: 'Cucumis-concombre' },
            { emoji: 'üçà', name: 'Melon', latin: 'Cucumis melo', group: 'Cucurbitac√©es', family: 'Cucurbitac√©es', order: 'Cucurbitales', class: 'Angiospermes', species: 'Cucumis-melon' },
            { emoji: 'üéÉ', name: 'Citrouille', latin: 'Cucurbita pepo', group: 'Cucurbitac√©es', family: 'Cucurbitac√©es', order: 'Cucurbitales', class: 'Angiospermes', species: 'Cucurbita' },
            
            // Fabac√©es
            { emoji: 'ü•ú', name: 'Cacahu√®te', latin: 'Arachis hypogaea', group: 'Fabac√©es', family: 'Fabac√©es', order: 'Fabales', class: 'Angiospermes', species: 'Arachis' },
            { emoji: '‚òòÔ∏è', name: 'Tr√®fle', latin: 'Trifolium spp.', group: 'Fabac√©es', family: 'Fabac√©es', order: 'Fabales', class: 'Angiospermes', species: 'Trifolium' },
            
            // Poac√©es
            { emoji: 'üåæ', name: 'Riz', latin: 'Oryza sativa', group: 'Poac√©es', family: 'Poac√©es', order: 'Poales', class: 'Angiospermes', species: 'Oryza' },
            { emoji: 'üåΩ', name: 'Ma√Øs', latin: 'Zea mays', group: 'Poac√©es', family: 'Poac√©es', order: 'Poales', class: 'Angiospermes', species: 'Zea' },
            { emoji: 'üéã', name: 'Bambou', latin: 'Bambusoideae', group: 'Poac√©es', family: 'Poac√©es', order: 'Poales', class: 'Angiospermes', species: 'Bambusa' },
            
            // Rutac√©es (Agrumes)
            { emoji: 'üçä', name: 'Orange', latin: 'Citrus sinensis', group: 'Rutac√©es', family: 'Rutac√©es', order: 'Sapindales', class: 'Angiospermes', species: 'Citrus-orange' },
            { emoji: 'üçã', name: 'Citron', latin: 'Citrus limon', group: 'Rutac√©es', family: 'Rutac√©es', order: 'Sapindales', class: 'Angiospermes', species: 'Citrus-citron' },
            
            // Autres Angiospermes
            { emoji: 'ü•ï', name: 'Carotte', latin: 'Daucus carota', group: 'Apiac√©es', family: 'Apiac√©es', order: 'Apiales', class: 'Angiospermes', species: 'Daucus' },
            { emoji: 'üåª', name: 'Tournesol', latin: 'Helianthus annuus', group: 'Ast√©rac√©es', family: 'Ast√©rac√©es', order: 'Asterales', class: 'Angiospermes', species: 'Helianthus' },
            { emoji: 'ü•¶', name: 'Brocoli', latin: 'Brassica oleracea', group: 'Brassicac√©es', family: 'Brassicac√©es', order: 'Brassicales', class: 'Angiospermes', species: 'Brassica' },
            { emoji: 'üçá', name: 'Raisin', latin: 'Vitis vinifera', group: 'Vitac√©es', family: 'Vitac√©es', order: 'Vitales', class: 'Angiospermes', species: 'Vitis' },
            { emoji: 'üåµ', name: 'Cactus', latin: 'Cactaceae', group: 'Cactac√©es', family: 'Cactac√©es', order: 'Caryophyllales', class: 'Angiospermes', species: 'Cactus' },
            { emoji: 'üå∑', name: 'Tulipe', latin: 'Tulipa spp.', group: 'Liliac√©es', family: 'Liliac√©es', order: 'Liliales', class: 'Angiospermes', species: 'Tulipa' },
            { emoji: 'üçå', name: 'Banane', latin: 'Musa spp.', group: 'Musac√©es', family: 'Musac√©es', order: 'Zingiberales', class: 'Angiospermes', species: 'Musa' },
            { emoji: 'ü••', name: 'Coco', latin: 'Cocos nucifera', group: 'Arecac√©es', family: 'Arecac√©es', order: 'Arecales', class: 'Angiospermes', species: 'Cocos' },
            
            // GYMNOSPERMES
            { emoji: 'üå≤', name: 'Conif√®re', latin: 'Pinus spp.', group: 'Pinac√©es', family: 'Pinac√©es', order: 'Pinales', class: 'Gymnospermes', species: 'Pinus' },
            { emoji: 'üéÑ', name: 'Sapin', latin: 'Abies spp.', group: 'Pinac√©es', family: 'Pinac√©es', order: 'Pinales', class: 'Gymnospermes', species: 'Abies' },
            
            // MAMMIF√àRES
            // Primates
            { emoji: 'üêµ', name: 'Singe', latin: 'Macaca spp.', group: 'Primates', family: 'Cercopithecidae', order: 'Primates', class: 'Mammalia', species: 'Macaca' },
            { emoji: 'ü¶ç', name: 'Gorille', latin: 'Gorilla gorilla', group: 'Hominid√©s', family: 'Hominidae', order: 'Primates', class: 'Mammalia', species: 'Gorilla' },
            { emoji: 'ü¶ß', name: 'Orang-outan', latin: 'Pongo spp.', group: 'Hominid√©s', family: 'Hominidae', order: 'Primates', class: 'Mammalia', species: 'Pongo' },
            
            // Carnivores - F√©lid√©s
            { emoji: 'üê±', name: 'Chat', latin: 'Felis catus', group: 'F√©lid√©s', family: 'Felidae', order: 'Carnivora', class: 'Mammalia', species: 'Felis' },
            { emoji: 'ü¶Å', name: 'Lion', latin: 'Panthera leo', group: 'F√©lid√©s', family: 'Felidae', order: 'Carnivora', class: 'Mammalia', species: 'Panthera-lion' },
            { emoji: 'üêØ', name: 'Tigre', latin: 'Panthera tigris', group: 'F√©lid√©s', family: 'Felidae', order: 'Carnivora', class: 'Mammalia', species: 'Panthera-tigre' },
            
            // Carnivores - Canid√©s
            { emoji: 'üê∂', name: 'Chien', latin: 'Canis familiaris', group: 'Canid√©s', family: 'Canidae', order: 'Carnivora', class: 'Mammalia', species: 'Canis-chien' },
            { emoji: 'üê∫', name: 'Loup', latin: 'Canis lupus', group: 'Canid√©s', family: 'Canidae', order: 'Carnivora', class: 'Mammalia', species: 'Canis-loup' },
            { emoji: 'ü¶ä', name: 'Renard', latin: 'Vulpes vulpes', group: 'Canid√©s', family: 'Canidae', order: 'Carnivora', class: 'Mammalia', species: 'Vulpes' },
            
            // Carnivores - Ursid√©s
            { emoji: 'üêª', name: 'Ours', latin: 'Ursus arctos', group: 'Ursid√©s', family: 'Ursidae', order: 'Carnivora', class: 'Mammalia', species: 'Ursus' },
            { emoji: 'üêº', name: 'Panda', latin: 'Ailuropoda melanoleuca', group: 'Ursid√©s', family: 'Ursidae', order: 'Carnivora', class: 'Mammalia', species: 'Ailuropoda' },
            
            // Ongul√©s
            { emoji: 'üêò', name: '√âl√©phant', latin: 'Loxodonta africana', group: 'Proboscidiens', family: 'Elephantidae', order: 'Proboscidea', class: 'Mammalia', species: 'Loxodonta' },
            { emoji: 'üê¥', name: 'Cheval', latin: 'Equus caballus', group: '√âquid√©s', family: 'Equidae', order: 'Perissodactyla', class: 'Mammalia', species: 'Equus-cheval' },
            { emoji: 'ü¶ì', name: 'Z√®bre', latin: 'Equus zebra', group: '√âquid√©s', family: 'Equidae', order: 'Perissodactyla', class: 'Mammalia', species: 'Equus-zebre' },
            { emoji: 'üêÆ', name: 'Vache', latin: 'Bos taurus', group: 'Bovid√©s', family: 'Bovidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Bos' },
            { emoji: 'üêê', name: 'Ch√®vre', latin: 'Capra hircus', group: 'Bovid√©s', family: 'Bovidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Capra' },
            { emoji: 'üêë', name: 'Mouton', latin: 'Ovis aries', group: 'Bovid√©s', family: 'Bovidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Ovis' },
            { emoji: 'üê∑', name: 'Cochon', latin: 'Sus scrofa', group: 'Suid√©s', family: 'Suidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Sus' },
            { emoji: 'üê™', name: 'Dromadaire', latin: 'Camelus dromedarius', group: 'Cam√©lid√©s', family: 'Camelidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Camelus-dromadaire' },
            { emoji: 'üê´', name: 'Chameau', latin: 'Camelus bactrianus', group: 'Cam√©lid√©s', family: 'Camelidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Camelus-chameau' },
            { emoji: 'ü¶å', name: 'Cerf', latin: 'Cervus elaphus', group: 'Cervid√©s', family: 'Cervidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Cervus' },
            { emoji: 'ü¶í', name: 'Girafe', latin: 'Giraffa camelopardalis', group: 'Giraffid√©s', family: 'Giraffidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Giraffa' },
            { emoji: 'ü¶õ', name: 'Hippopotame', latin: 'Hippopotamus amphibius', group: 'Hippopotamid√©s', family: 'Hippopotamidae', order: 'Artiodactyla', class: 'Mammalia', species: 'Hippopotamus' },
            
            // Rongeurs
            { emoji: 'üê≠', name: 'Souris', latin: 'Mus musculus', group: 'Murid√©s', family: 'Muridae', order: 'Rodentia', class: 'Mammalia', species: 'Mus' },
            { emoji: 'üêÄ', name: 'Rat', latin: 'Rattus norvegicus', group: 'Murid√©s', family: 'Muridae', order: 'Rodentia', class: 'Mammalia', species: 'Rattus' },
            { emoji: 'üêπ', name: 'Hamster', latin: 'Cricetinae', group: 'Cric√©tid√©s', family: 'Cricetidae', order: 'Rodentia', class: 'Mammalia', species: 'Cricetus' },
            
            // Lagomorphes
            { emoji: 'üê∞', name: 'Lapin', latin: 'Oryctolagus cuniculus', group: 'L√©porid√©s', family: 'Leporidae', order: 'Lagomorpha', class: 'Mammalia', species: 'Oryctolagus' },
            
            // C√©tac√©s
            { emoji: 'üê≥', name: 'Baleine', latin: 'Balaenoptera musculus', group: 'C√©tac√©s', family: 'Balaenopteridae', order: 'Cetacea', class: 'Mammalia', species: 'Balaenoptera' },
            { emoji: 'üê¨', name: 'Dauphin', latin: 'Delphinus delphis', group: 'C√©tac√©s', family: 'Delphinidae', order: 'Cetacea', class: 'Mammalia', species: 'Delphinus' },
            
            // OISEAUX
            { emoji: 'üêî', name: 'Poule', latin: 'Gallus gallus', group: 'Gallinac√©s', family: 'Phasianidae', order: 'Galliformes', class: 'Aves', species: 'Gallus' },
            { emoji: 'ü¶É', name: 'Dindon', latin: 'Meleagris gallopavo', group: 'Gallinac√©s', family: 'Phasianidae', order: 'Galliformes', class: 'Aves', species: 'Meleagris' },
            { emoji: 'ü¶Ü', name: 'Canard', latin: 'Anas platyrhynchos', group: 'Anatid√©s', family: 'Anatidae', order: 'Anseriformes', class: 'Aves', species: 'Anas' },
            { emoji: 'ü¶¢', name: 'Cygne', latin: 'Cygnus spp.', group: 'Anatid√©s', family: 'Anatidae', order: 'Anseriformes', class: 'Aves', species: 'Cygnus' },
            { emoji: 'ü¶Ö', name: 'Aigle', latin: 'Aquila chrysaetos', group: 'Accipitrid√©s', family: 'Accipitridae', order: 'Accipitriformes', class: 'Aves', species: 'Aquila' },
            { emoji: 'ü¶â', name: 'Hibou', latin: 'Bubo bubo', group: 'Strigid√©s', family: 'Strigidae', order: 'Strigiformes', class: 'Aves', species: 'Bubo' },
            { emoji: 'üêß', name: 'Manchot', latin: 'Aptenodytes forsteri', group: 'Sph√©niscid√©s', family: 'Spheniscidae', order: 'Sphenisciformes', class: 'Aves', species: 'Aptenodytes' },
            
            // REPTILES
            { emoji: 'üêä', name: 'Crocodile', latin: 'Crocodylus niloticus', group: 'Crocodiliens', family: 'Crocodylidae', order: 'Crocodilia', class: 'Reptilia', species: 'Crocodylus' },
            { emoji: 'üêç', name: 'Serpent', latin: 'Python spp.', group: 'Serpents', family: 'Pythonidae', order: 'Squamata', class: 'Reptilia', species: 'Python' },
            { emoji: 'ü¶é', name: 'L√©zard', latin: 'Lacerta spp.', group: 'L√©zards', family: 'Lacertidae', order: 'Squamata', class: 'Reptilia', species: 'Lacerta' },
            { emoji: 'üê¢', name: 'Tortue', latin: 'Testudo spp.', group: 'Tortues', family: 'Testudinidae', order: 'Testudines', class: 'Reptilia', species: 'Testudo' },
            
            // AMPHIBIENS
            { emoji: 'üê∏', name: 'Grenouille', latin: 'Rana temporaria', group: 'Anoures', family: 'Ranidae', order: 'Anura', class: 'Amphibia', species: 'Rana' },
            
            // POISSONS
            { emoji: 'üêü', name: 'Poisson', latin: 'Danio rerio', group: 'Poissons osseux', family: 'Cyprinidae', order: 'Cypriniformes', class: 'Actinopterygii', species: 'Danio' },
            { emoji: 'üê†', name: 'Poisson tropical', latin: 'Pomacanthus', group: 'Poissons osseux', family: 'Pomacanthidae', order: 'Perciformes', class: 'Actinopterygii', species: 'Pomacanthus' },
            { emoji: 'ü¶à', name: 'Requin', latin: 'Carcharodon carcharias', group: 'Chondrichtyens', family: 'Lamnidae', order: 'Lamniformes', class: 'Chondrichthyes', species: 'Carcharodon' },
            
            // ARTHROPODES - Insectes
            { emoji: 'ü¶ã', name: 'Papillon', latin: 'Danaus plexippus', group: 'L√©pidopt√®res', family: 'Nymphalidae', order: 'Lepidoptera', class: 'Insecta', species: 'Danaus' },
            { emoji: 'üêù', name: 'Abeille', latin: 'Apis mellifera', group: 'Hym√©nopt√®res', family: 'Apidae', order: 'Hymenoptera', class: 'Insecta', species: 'Apis' },
            { emoji: 'üêú', name: 'Fourmi', latin: 'Formica spp.', group: 'Hym√©nopt√®res', family: 'Formicidae', order: 'Hymenoptera', class: 'Insecta', species: 'Formica' },
            { emoji: 'üêû', name: 'Coccinelle', latin: 'Coccinella septempunctata', group: 'Col√©opt√®res', family: 'Coccinellidae', order: 'Coleoptera', class: 'Insecta', species: 'Coccinella' },
            { emoji: 'ü™≤', name: 'Scarab√©e', latin: 'Scarabaeus sacer', group: 'Col√©opt√®res', family: 'Scarabaeidae', order: 'Coleoptera', class: 'Insecta', species: 'Scarabaeus' },
            { emoji: 'ü¶ü', name: 'Moustique', latin: 'Anopheles gambiae', group: 'Dipt√®res', family: 'Culicidae', order: 'Diptera', class: 'Insecta', species: 'Anopheles' },
            { emoji: 'ü™∞', name: 'Mouche', latin: 'Musca domestica', group: 'Dipt√®res', family: 'Muscidae', order: 'Diptera', class: 'Insecta', species: 'Musca' },
            
            // Arachnides
            { emoji: 'üï∑Ô∏è', name: 'Araign√©e', latin: 'Araneus diadematus', group: 'Arachnides', family: 'Araneidae', order: 'Araneae', class: 'Arachnida', species: 'Araneus' },
            { emoji: 'ü¶Ç', name: 'Scorpion', latin: 'Centruroides sculpturatus', group: 'Arachnides', family: 'Buthidae', order: 'Scorpiones', class: 'Arachnida', species: 'Centruroides' },
            
            // Crustac√©s
            { emoji: 'ü¶Ä', name: 'Crabe', latin: 'Cancer pagurus', group: 'Crustac√©s', family: 'Cancridae', order: 'Decapoda', class: 'Malacostraca', species: 'Cancer' },
            { emoji: 'ü¶û', name: 'Homard', latin: 'Homarus americanus', group: 'Crustac√©s', family: 'Nephropidae', order: 'Decapoda', class: 'Malacostraca', species: 'Homarus' },
            { emoji: 'ü¶ê', name: 'Crevette', latin: 'Penaeus monodon', group: 'Crustac√©s', family: 'Penaeidae', order: 'Decapoda', class: 'Malacostraca', species: 'Penaeus' },
            
            // MOLLUSQUES
            { emoji: 'üêå', name: 'Escargot', latin: 'Helix pomatia', group: 'Gast√©ropodes', family: 'Helicidae', order: 'Stylommatophora', class: 'Gastropoda', species: 'Helix' },
            { emoji: 'üêô', name: 'Pieuvre', latin: 'Octopus vulgaris', group: 'C√©phalopodes', family: 'Octopodidae', order: 'Octopoda', class: 'Cephalopoda', species: 'Octopus' },
            { emoji: 'ü¶ë', name: 'Calmar', latin: 'Loligo vulgaris', group: 'C√©phalopodes', family: 'Loliginidae', order: 'Myopsida', class: 'Cephalopoda', species: 'Loligo' },
            
            // CNIDAIRES
            { emoji: 'ü™∏', name: 'Corail', latin: 'Corallium rubrum', group: 'Cnidaires', family: 'Coralliidae', order: 'Alcyonacea', class: 'Anthozoa', species: 'Corallium' },
            
            // CHAMPIGNONS
            { emoji: 'üçÑ', name: 'Champignon', latin: 'Agaricus bisporus', group: 'Champignons', family: 'Agaricaceae', order: 'Agaricales', class: 'Fungi', species: 'Agaricus' }
        ];

        // Donn√©es de divergence bas√©es sur TimeTree (en millions d'ann√©es)
        const divergenceTimes = {
            // Distances entre grands groupes
            'Fungi-Mammalia': 1500,
            'Fungi-Aves': 1500,
            'Fungi-Reptilia': 1500,
            'Fungi-Amphibia': 1500,
            'Fungi-Actinopterygii': 1500,
            'Fungi-Insecta': 1500,
            'Fungi-Arachnida': 1500,
            'Fungi-Malacostraca': 1500,
            'Fungi-Gastropoda': 1500,
            'Fungi-Cephalopoda': 1500,
            'Fungi-Anthozoa': 1500,
            'Fungi-Angiospermes': 1600,
            'Fungi-Gymnospermes': 1600,
            
            'Angiospermes-Mammalia': 1500,
            'Angiospermes-Aves': 1500,
            'Angiospermes-Reptilia': 1500,
            'Angiospermes-Amphibia': 1500,
            'Angiospermes-Actinopterygii': 1500,
            'Angiospermes-Insecta': 1500,
            'Angiospermes-Arachnida': 1500,
            'Angiospermes-Malacostraca': 1500,
            'Angiospermes-Gastropoda': 1500,
            'Angiospermes-Cephalopoda': 1500,
            'Angiospermes-Anthozoa': 1500,
            'Angiospermes-Gymnospermes': 300,
            
            'Gymnospermes-Mammalia': 1500,
            'Gymnospermes-Aves': 1500,
            'Gymnospermes-Reptilia': 1500,
            'Gymnospermes-Amphibia': 1500,
            'Gymnospermes-Actinopterygii': 1500,
            'Gymnospermes-Insecta': 1500,
            'Gymnospermes-Arachnida': 1500,
            
            // Entre classes animales
            'Mammalia-Aves': 320,
            'Mammalia-Reptilia': 320,
            'Mammalia-Amphibia': 360,
            'Mammalia-Actinopterygii': 435,
            'Mammalia-Chondrichthyes': 450,
            'Mammalia-Insecta': 750,
            'Mammalia-Arachnida': 750,
            'Mammalia-Malacostraca': 750,
            'Mammalia-Gastropoda': 750,
            'Mammalia-Cephalopoda': 750,
            'Mammalia-Anthozoa': 800,
            
            'Aves-Reptilia': 255,
            'Aves-Amphibia': 360,
            'Aves-Actinopterygii': 435,
            'Aves-Insecta': 750,
            'Aves-Arachnida': 750,
            
            'Reptilia-Amphibia': 360,
            'Reptilia-Actinopterygii': 435,
            'Reptilia-Insecta': 750,
            
            'Amphibia-Actinopterygii': 435,
            'Amphibia-Insecta': 750,
            
            'Actinopterygii-Chondrichthyes': 450,
            'Actinopterygii-Insecta': 750,
            'Actinopterygii-Arachnida': 750,
            
            'Insecta-Arachnida': 510,
            'Insecta-Malacostraca': 540,
            'Insecta-Gastropoda': 750,
            'Insecta-Cephalopoda': 750,
            
            'Arachnida-Malacostraca': 540,
            'Arachnida-Gastropoda': 750,
            
            'Malacostraca-Gastropoda': 750,
            'Malacostraca-Cephalopoda': 750,
            
            'Gastropoda-Cephalopoda': 520,
            'Gastropoda-Anthozoa': 700,
            'Cephalopoda-Anthozoa': 700,
            
            // Ordres de mammif√®res
            'Primates-Carnivora': 92,
            'Primates-Artiodactyla': 96,
            'Primates-Perissodactyla': 96,
            'Primates-Proboscidea': 105,
            'Primates-Rodentia': 92,
            'Primates-Lagomorpha': 92,
            'Primates-Cetacea': 96,
            
            'Carnivora-Artiodactyla': 86,
            'Carnivora-Perissodactyla': 86,
            'Carnivora-Cetacea': 86,
            'Carnivora-Rodentia': 92,
            
            'Artiodactyla-Perissodactyla': 86,
            'Artiodactyla-Cetacea': 55, // Tr√®s proches
            'Artiodactyla-Proboscidea': 105,
            
            'Rodentia-Lagomorpha': 82,
            
            // Familles de Carnivores
            'Felidae-Canidae': 52,
            'Felidae-Ursidae': 52,
            'Canidae-Ursidae': 48,
            
            // Familles de Primates
            'Hominidae-Cercopithecidae': 29,
            
            // Ordres d'oiseaux
            'Galliformes-Anseriformes': 70,
            'Galliformes-Accipitriformes': 90,
            'Galliformes-Strigiformes': 90,
            'Galliformes-Sphenisciformes': 90,
            'Anseriformes-Accipitriformes': 90,
            
            // Ordres de reptiles
            'Crocodilia-Squamata': 255,
            'Crocodilia-Testudines': 255,
            'Squamata-Testudines': 260,
            
            // Ordres d'insectes
            'Lepidoptera-Hymenoptera': 280,
            'Lepidoptera-Coleoptera': 300,
            'Lepidoptera-Diptera': 320,
            'Hymenoptera-Coleoptera': 300,
            'Hymenoptera-Diptera': 320,
            'Coleoptera-Diptera': 320,
            
            // Ordres d'Angiospermes
            'Rosales-Solanales': 110,
            'Rosales-Cucurbitales': 90,
            'Rosales-Fabales': 110,
            'Rosales-Poales': 120,
            'Rosales-Sapindales': 110,
            'Rosales-Brassicales': 100,
            
            'Solanales-Fabales': 100,
            'Fabales-Rosales': 110,
            'Cucurbitales-Fabales': 100,
            
            'Poales-Arecales': 115,
            'Poales-Liliales': 120,
            'Poales-Zingiberales': 115,
            
            'Sapindales-Rosales': 110,
            
            // Familles dans les ordres
            'Rosac√©es-Rosac√©es': 50,
            'Solanac√©es-Solanac√©es': 40,
            'Cucurbitac√©es-Cucurbitac√©es': 30,
            'Fabac√©es-Fabac√©es': 50,
            'Poac√©es-Poac√©es': 60,
            'Rutac√©es-Rutac√©es': 10,
            'Felidae-Felidae': 15,
            'Canidae-Canidae': 10,
            'Ursidae-Ursidae': 10,
            'Hominidae-Hominidae': 14,
            'Bovidae-Bovidae': 20,
            'Equidae-Equidae': 4,
            'Camelidae-Camelidae': 5,
            'Muridae-Muridae': 12,
            'Balaenopteridae-Delphinidae': 35,
            'Phasianidae-Phasianidae': 25,
            'Anatidae-Anatidae': 20,
            'Pythonidae-Lacertidae': 150,
            'Apidae-Formicidae': 150,
            'Coccinellidae-Scarabaeidae': 200,
            'Culicidae-Muscidae': 150,
            'Araneidae-Buthidae': 430,
            'Cancridae-Nephropidae': 200,
            'Nephropidae-Penaeidae': 250,
            'Octopodidae-Loliginidae': 270
        };

        let score = 0;
        let total = 0;
        let questionNumber = 1;
        let currentQuestion = null;
        let gameMode = 'all'; // 'plants', 'animals', 'all'
        let availableOrganisms = [];
        let difficulty = 'mixed'; // 'easy', 'medium', 'hard', 'mixed'

        function startGame(mode) {
            gameMode = mode;
            
            // Filtrer les organismes selon le mode
            if (mode === 'plants') {
                availableOrganisms = organisms.filter(o => 
                    o.class === 'Angiospermes' || o.class === 'Gymnospermes'
                );
                document.getElementById('currentMode').textContent = 'üåø Mode : Plantes';
            } else if (mode === 'animals') {
                availableOrganisms = organisms.filter(o => 
                    o.class === 'Mammalia' || o.class === 'Aves' || o.class === 'Reptilia' || 
                    o.class === 'Amphibia' || o.class === 'Actinopterygii' || o.class === 'Chondrichthyes' ||
                    o.class === 'Insecta' || o.class === 'Arachnida' || o.class === 'Malacostraca' ||
                    o.class === 'Gastropoda' || o.class === 'Cephalopoda' || o.class === 'Anthozoa'
                );
                document.getElementById('currentMode').textContent = 'ü¶Å Mode : Animaux';
            } else {
                availableOrganisms = organisms;
                document.getElementById('currentMode').textContent = 'üåç Mode : Tout le vivant';
            }
            
            // R√©initialiser les statistiques
            score = 0;
            total = 0;
            questionNumber = 1;
            
            // Afficher le jeu
            document.getElementById('modeSelection').style.display = 'none';
            document.getElementById('gameContent').style.display = 'block';
            
            displayQuestion();
        }
        
        function returnToMenu() {
            document.getElementById('modeSelection').style.display = 'block';
            document.getElementById('gameContent').style.display = 'none';
            score = 0;
            total = 0;
            questionNumber = 1;
        }

        function getDivergenceTime(org1, org2) {
            // Si m√™me esp√®ce
            if (org1.species === org2.species) return 0;
            
            // Chercher dans les donn√©es
            const key1 = `${org1.class}-${org2.class}`;
            const key2 = `${org2.class}-${org1.class}`;
            if (divergenceTimes[key1]) return divergenceTimes[key1];
            if (divergenceTimes[key2]) return divergenceTimes[key2];
            
            const key3 = `${org1.order}-${org2.order}`;
            const key4 = `${org2.order}-${org1.order}`;
            if (divergenceTimes[key3]) return divergenceTimes[key3];
            if (divergenceTimes[key4]) return divergenceTimes[key4];
            
            const key5 = `${org1.family}-${org2.family}`;
            const key6 = `${org2.family}-${org1.family}`;
            if (divergenceTimes[key5]) return divergenceTimes[key5];
            if (divergenceTimes[key6]) return divergenceTimes[key6];
            
            // Par d√©faut estimation
            if (org1.class !== org2.class) return 800;
            if (org1.order !== org2.order) return 100;
            if (org1.family !== org2.family) return 50;
            return 20;
        }

        function generateQuestion() {
            // Choisir une difficult√© al√©atoire pour varier les questions
            const difficultyChoice = Math.random();
            let selectedDifficulty;
            
            if (difficultyChoice < 0.25) {
                selectedDifficulty = 'easy'; // 25% - diff√©rences de classe
            } else if (difficultyChoice < 0.50) {
                selectedDifficulty = 'medium'; // 25% - diff√©rences d'ordre
            } else {
                selectedDifficulty = 'hard'; // 50% - diff√©rences de famille ou genre
            }
            
            let attempts = 0;
            const maxAttempts = 100;
            
            while (attempts < maxAttempts) {
                attempts++;
                
                // S√©lectionner 3 organismes compl√®tement al√©atoirement
                const shuffled = [...availableOrganisms].sort(() => Math.random() - 0.5);
                
                if (shuffled.length < 3) {
                    alert("Pas assez d'organismes dans ce mode !");
                    return null;
                }
                
                const org1 = shuffled[0];
                const org2 = shuffled[1];
                const org3 = shuffled[2];
                
                // V√©rifier qu'ils sont tous d'esp√®ces diff√©rentes
                if (org1.species === org2.species || org1.species === org3.species || org2.species === org3.species) {
                    continue;
                }
                
                // Calculer les distances
                const dist12 = getDivergenceTime(org1, org2);
                const dist13 = getDivergenceTime(org1, org3);
                const dist23 = getDivergenceTime(org2, org3);
                
                // Trouver la paire la plus proche
                let closePair, distantOrg, closeTime, distantTime1, distantTime2;
                
                if (dist12 <= dist13 && dist12 <= dist23) {
                    closePair = [org1, org2];
                    distantOrg = org3;
                    closeTime = dist12;
                    distantTime1 = dist13;
                    distantTime2 = dist23;
                } else if (dist13 <= dist12 && dist13 <= dist23) {
                    closePair = [org1, org3];
                    distantOrg = org2;
                    closeTime = dist13;
                    distantTime1 = dist12;
                    distantTime2 = dist23;
                } else {
                    closePair = [org2, org3];
                    distantOrg = org1;
                    closeTime = dist23;
                    distantTime1 = dist12;
                    distantTime2 = dist13;
                }
                
                const maxDistantTime = Math.max(distantTime1, distantTime2);
                
                // V√©rifier que la question a du sens (la paire proche est vraiment plus proche)
                if (closeTime >= maxDistantTime * 0.9) {
                    continue; // Pas assez de diff√©rence
                }
                
                // Filtrer selon la difficult√© choisie
                if (selectedDifficulty === 'easy') {
                    // Facile : classes diff√©rentes (ex: mammif√®re vs insecte)
                    if (closePair[0].class === closePair[1].class && 
                        closePair[0].class === distantOrg.class) {
                        continue; // Tous de la m√™me classe, trop dur
                    }
                }
                else if (selectedDifficulty === 'medium') {
                    // Moyen : m√™me classe mais ordres diff√©rents
                    if (closePair[0].class !== closePair[1].class || 
                        closePair[0].class !== distantOrg.class) {
                        continue; // Pas de la m√™me classe, trop facile
                    }
                    if (closePair[0].order === distantOrg.order || 
                        closePair[1].order === distantOrg.order) {
                        continue; // M√™me ordre, trop dur
                    }
                }
                else { // hard
                    // Difficile : m√™me ordre ou m√™me famille
                    if (closePair[0].order !== closePair[1].order) {
                        continue; // Ordres diff√©rents, pas assez dur
                    }
                    // On veut que ce soit d√©licat : m√™me ordre pour les 3
                    if (closePair[0].order !== distantOrg.order) {
                        continue; // Pas du m√™me ordre, pas assez dur
                    }
                }
                
                // Question valide trouv√©e !
                const orgs = [org1, org2, org3].sort(() => Math.random() - 0.5);
                
                const choices = [
                    { pair: [orgs[0], orgs[1]], text: `${orgs[0].emoji} ${orgs[0].name} et ${orgs[1].emoji} ${orgs[1].name}` },
                    { pair: [orgs[0], orgs[2]], text: `${orgs[0].emoji} ${orgs[0].name} et ${orgs[2].emoji} ${orgs[2].name}` },
                    { pair: [orgs[1], orgs[2]], text: `${orgs[1].emoji} ${orgs[1].name} et ${orgs[2].emoji} ${orgs[2].name}` }
                ];
                
                return {
                    organisms: orgs,
                    choices: choices,
                    correctPair: closePair,
                    closeTime: closeTime,
                    distantTime: maxDistantTime,
                    difficulty: selectedDifficulty
                };
            }
            
            // Si on n'a pas r√©ussi √† g√©n√©rer une question apr√®s maxAttempts
            // Revenir √† l'ancienne m√©thode simple
            return generateSimpleQuestion();
        }
        
        function generateSimpleQuestion() {
            // M√©thode de secours : choisir 2 de la m√™me famille, 1 diff√©rent
            const groupedByFamily = {};
            availableOrganisms.forEach(org => {
                if (!groupedByFamily[org.family]) {
                    groupedByFamily[org.family] = [];
                }
                groupedByFamily[org.family].push(org);
            });
            
            const validFamilies = Object.keys(groupedByFamily).filter(family => {
                const orgs = groupedByFamily[family];
                const uniqueSpecies = new Set(orgs.map(o => o.species));
                return uniqueSpecies.size >= 2;
            });
            
            if (validFamilies.length === 0) {
                alert("Pas assez d'organismes diff√©rents dans ce mode !");
                return null;
            }
            
            const closeFamily = validFamilies[Math.floor(Math.random() * validFamilies.length)];
            const closeOrgs = groupedByFamily[closeFamily];
            
            let org1, org2;
            let attempts = 0;
            do {
                org1 = closeOrgs[Math.floor(Math.random() * closeOrgs.length)];
                org2 = closeOrgs[Math.floor(Math.random() * closeOrgs.length)];
                attempts++;
                if (attempts > 100) return null;
            } while (org1.species === org2.species);
            
            let org3;
            attempts = 0;
            do {
                org3 = availableOrganisms[Math.floor(Math.random() * availableOrganisms.length)];
                attempts++;
                if (attempts > 100) return null;
            } while (org3.family === closeFamily);
            
            const orgs = [org1, org2, org3].sort(() => Math.random() - 0.5);
            
            const choices = [
                { pair: [orgs[0], orgs[1]], text: `${orgs[0].emoji} ${orgs[0].name} et ${orgs[1].emoji} ${orgs[1].name}` },
                { pair: [orgs[0], orgs[2]], text: `${orgs[0].emoji} ${orgs[0].name} et ${orgs[2].emoji} ${orgs[2].name}` },
                { pair: [orgs[1], orgs[2]], text: `${orgs[1].emoji} ${orgs[1].name} et ${orgs[2].emoji} ${orgs[2].name}` }
            ];
            
            return {
                organisms: orgs,
                choices: choices,
                correctPair: [org1, org2],
                closeTime: getDivergenceTime(org1, org2),
                distantTime: Math.max(getDivergenceTime(org1, org3), getDivergenceTime(org2, org3)),
                difficulty: 'easy'
            };
        }

        function displayQuestion() {
            currentQuestion = generateQuestion();
            if (!currentQuestion) {
                alert("Erreur lors de la g√©n√©ration de la question");
                return;
            }
            
            const organismsDiv = document.getElementById('organisms');
            organismsDiv.innerHTML = currentQuestion.organisms
                .map(org => `
                    <div class="organism-box">
                        <div class="organism">${org.emoji}</div>
                        <div class="organism-label">${org.name}</div>
                    </div>
                `)
                .join('');
            
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = currentQuestion.choices
                .map((choice, index) => 
                    `<div class="choice" onclick="checkAnswer(${index})">${choice.text}</div>`
                )
                .join('');
            
            document.getElementById('feedback').className = 'feedback';
            document.getElementById('nextBtn').className = 'next-btn';
            document.getElementById('questionNum').textContent = questionNumber;
        }

        function checkAnswer(choiceIndex) {
            total++;
            const choice = currentQuestion.choices[choiceIndex];
            const isCorrect = (choice.pair[0].species === currentQuestion.correctPair[0].species && 
                              choice.pair[1].species === currentQuestion.correctPair[1].species) ||
                             (choice.pair[0].species === currentQuestion.correctPair[1].species && 
                              choice.pair[1].species === currentQuestion.correctPair[0].species);
            
            if (isCorrect) score++;
            
            const choices = document.querySelectorAll('.choice');
            choices.forEach((choiceEl, index) => {
                choiceEl.classList.add('disabled');
                const pair = currentQuestion.choices[index].pair;
                const isThisCorrect = (pair[0].species === currentQuestion.correctPair[0].species && 
                                      pair[1].species === currentQuestion.correctPair[1].species) ||
                                     (pair[0].species === currentQuestion.correctPair[1].species && 
                                      pair[1].species === currentQuestion.correctPair[0].species);
                if (isThisCorrect) {
                    choiceEl.classList.add('correct');
                } else if (index === choiceIndex && !isCorrect) {
                    choiceEl.classList.add('incorrect');
                }
            });
            
            const feedback = document.getElementById('feedback');
            feedback.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
            
            const org1 = currentQuestion.correctPair[0];
            const org2 = currentQuestion.correctPair[1];
            
            const wrongOrg = currentQuestion.organisms.find(o => 
                o.species !== org1.species && o.species !== org2.species
            );
            
            if (isCorrect) {
                feedback.innerHTML = `
                    <div class="feedback-title">‚úÖ Excellente r√©ponse !</div>
                    <div class="feedback-content">
                        <strong>${org1.emoji} ${org1.name}</strong> (<em>${org1.latin}</em>) et 
                        <strong>${org2.emoji} ${org2.name}</strong> (<em>${org2.latin}</em>) 
                        appartiennent tous deux √† la famille des <strong>${org1.family}</strong>.
                        
                        <div class="time-info">
                            ‚è∞ <strong>Divergence √©volutive :</strong><br>
                            ‚Ä¢ ${org1.name} et ${org2.name} ont diverg√© il y a environ 
                            <span class="time-value">${currentQuestion.closeTime} millions d'ann√©es</span><br>
                            ‚Ä¢ ${wrongOrg.name} (${wrongOrg.family}) a diverg√© il y a environ 
                            <span class="time-value">${currentQuestion.distantTime} millions d'ann√©es</span>
                        </div>
                        
                        <div class="taxonomy-info">
                            Ces deux esp√®ces partagent l'ordre ${org1.order}
                        </div>
                    </div>
                `;
            } else {
                feedback.innerHTML = `
                    <div class="feedback-title">‚ùå Pas tout √† fait...</div>
                    <div class="feedback-content">
                        La bonne r√©ponse √©tait <strong>${org1.emoji} ${org1.name}</strong> 
                        et <strong>${org2.emoji} ${org2.name}</strong>.
                        
                        <div class="time-info">
                            ‚è∞ <strong>Pourquoi ?</strong><br>
                            ‚Ä¢ ${org1.name} et ${org2.name} appartiennent √† la famille des <strong>${org1.family}</strong> 
                            et ont diverg√© il y a seulement <span class="time-value">${currentQuestion.closeTime} millions d'ann√©es</span><br>
                            ‚Ä¢ ${wrongOrg.name} appartient √† la famille des <strong>${wrongOrg.family}</strong> 
                            et s'est s√©par√© il y a environ <span class="time-value">${currentQuestion.distantTime} millions d'ann√©es</span>
                        </div>
                        
                        <div class="taxonomy-info">
                            ${org1.latin} et ${org2.latin} partagent l'ordre ${org1.order}
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('score').textContent = score;
            document.getElementById('total').textContent = total;
            
            const percentage = Math.round((score / total) * 100);
            document.getElementById('percentage').textContent = percentage + '%';
            
            document.getElementById('nextBtn').className = 'next-btn show';
        }

        function nextQuestion() {
            questionNumber++;
            displayQuestion();
        }
    </script>
</body>
</html>